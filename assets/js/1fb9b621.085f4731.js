"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[785],{5961:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>i,default:()=>d,frontMatter:()=>c,metadata:()=>h,toc:()=>r});var o=n(5893),s=n(1151);const c={title:"Custom Notch Shape API"},i=void 0,h={id:"development/extensions/api/blocks/custom-notch-shape",title:"Custom Notch Shape API",description:"This API allows you to change the shape of the notches in command/c-blocks to whatever you wish. It can be used for clarifying custom types and systems!",source:"@site/docs/development/extensions/api/blocks/custom-notch-shape.md",sourceDirName:"development/extensions/api/blocks",slug:"/development/extensions/api/blocks/custom-notch-shape",permalink:"/PenguinMod-Docs/development/extensions/api/blocks/custom-notch-shape",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Custom Notch Shape API"},sidebar:"customExtensions",previous:{title:"Custom Block Shape API",permalink:"/PenguinMod-Docs/development/extensions/api/blocks/custom-block-shape"},next:{title:"Block Mutation API",permalink:"/PenguinMod-Docs/development/extensions/api/blocks/mutations"}},a={},r=[{value:"Making the shape",id:"making-the-shape",level:2},{value:"Base path",id:"base-path",level:3},{value:"Importing the Base path",id:"importing-the-base-path",level:3},{value:"Making the Notch",id:"making-the-notch",level:3},{value:"Defining the Notch",id:"defining-the-notch",level:2},{value:"Using a Custom Notch in your Extension",id:"using-a-custom-notch-in-your-extension",level:2},{value:"Make a Command/C-Block",id:"make-a-commandc-block",level:3}];function l(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"This API allows you to change the shape of the notches in command/c-blocks to whatever you wish. It can be used for clarifying custom types and systems!"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.em,{children:"You should have a decent knowledge of ScratchBlocks and SVG Paths to use this API."})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.em,{children:"Note that the name ScratchBlocks is mentioned, but ScratchBlocks is simply a custom modification of Blockly so that name also appears in some functions."})}),"\n",(0,o.jsx)(t.h2,{id:"making-the-shape",children:"Making the shape"}),"\n",(0,o.jsx)(t.admonition,{type:"note",children:(0,o.jsxs)(t.p,{children:["This tutorial uses ",(0,o.jsx)(t.a,{href:"https://yqnn.github.io/svg-path-editor/",children:"SvgPathEditor"})," since it's a good path editor for utility in PenguinMod."]})}),"\n",(0,o.jsx)(t.h3,{id:"base-path",children:"Base path"}),"\n",(0,o.jsx)(t.p,{children:"The easiest way to make your notches is to start with an existing notch's path.\r\nYou can easily get one of these by pasting one of these into the DevTools Console in your browser:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.code,{children:"ScratchBlocks.BlockSvg.NOTCH_PATH_LEFT"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.code,{children:"ScratchBlocks.BlockSvg.NOTCH_SWITCH_PATH_LEFT"})}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:'To copy the path, you just need to press enter (to get the output of the variable) and then right-click the output string and click "Copy string contents."'}),"\n",(0,o.jsx)(t.h3,{id:"importing-the-base-path",children:"Importing the Base path"}),"\n",(0,o.jsxs)(t.p,{children:["In ",(0,o.jsx)(t.a,{href:"https://yqnn.github.io/svg-path-editor/",children:"SvgPathEditor"})," you now want to paste the base path in the top left. Add ",(0,o.jsx)(t.code,{children:"m0 0"})," at the start and ",(0,o.jsx)(t.code,{children:"z"}),' at the end so the path is valid. Then, click "Convert to absolute" in the menu.']}),"\n",(0,o.jsx)("img",{src:"/img/docimages/svgpatheditor_notch1.png",alt:"SvgPathEditor UI"}),"\n",(0,o.jsx)(t.p,{children:"This is the easiest way to design the path since you won't be moving other parts of the path as much if they were kept relative."}),"\n",(0,o.jsx)(t.h3,{id:"making-the-notch",children:"Making the Notch"}),"\n",(0,o.jsx)(t.p,{children:"When making your notch, it is recommended to keep the size at a width of '36' and a height of '8'.\r\nThis limit is set to prevent weird padding issues when connecting blocks."}),"\n",(0,o.jsxs)(t.p,{children:["Make sure you don't let the notch go past the center Y-axis line!\r\nAdditionally, keep every svg path ",(0,o.jsx)(t.strong,{children:"relative"})," and not ",(0,o.jsx)(t.strong,{children:"absolute"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["Remove the starting ",(0,o.jsx)(t.code,{children:"m 0 0"})," and ending ",(0,o.jsx)(t.code,{children:"z"}),", if present."]}),"\n",(0,o.jsx)(t.h2,{id:"defining-the-notch",children:"Defining the Notch"}),"\n",(0,o.jsx)(t.p,{children:"In order to make custom notch shapes, you first need to grab ScratchBlocks itself:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"/* get ScratchBlocks if availiable... */\r\nif (Scratch.gui) {\r\n    Scratch.gui.getBlockly().then(ScratchBlocks => {\r\n        // here you have access to ScratchBlocks safely\r\n    });\r\n}\n"})}),"\n",(0,o.jsx)(t.p,{children:"Make sure you don't try to grab ScratchBlocks without checking for the GUI, since packaged projects will not have ScratchBlocks present."}),"\n",(0,o.jsxs)(t.p,{children:["You then need to use the ",(0,o.jsx)(t.code,{children:"ScratchBlocks.BlockSvg.registerCustomNotch"})," function inside the ",(0,o.jsx)(t.code,{children:"then"})," callback to register your shape:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:'Scratch.gui.getBlockly().then(ScratchBlocks => {\r\n    ScratchBlocks.BlockSvg.registerCustomNotch("[EXTENSION ID]-[NOTCH NAME]", notchSVGPath);\r\n});\n'})}),"\n",(0,o.jsxs)(t.p,{children:["The first argument to ",(0,o.jsx)(t.code,{children:"registerCustomNotch"})," is the ID of your shape. This must be set to your extension's ID, then your notch's name, with a dash between."]}),"\n",(0,o.jsxs)(t.p,{children:["An example would be ",(0,o.jsx)(t.code,{children:"myReallyCoolExtension-bumpyNotch"}),". The extension ID is ",(0,o.jsx)(t.code,{children:"myReallyCoolExtension"})," and the notch is a ",(0,o.jsx)(t.code,{children:"bumpyNotch"}),"."]}),"\n",(0,o.jsx)(t.p,{children:"Lastly, you need to provide the SVG path you made."}),"\n",(0,o.jsx)(t.h2,{id:"using-a-custom-notch-in-your-extension",children:"Using a Custom Notch in your Extension"}),"\n",(0,o.jsx)(t.p,{children:"Now that your notch is registered (with no errors), you can safely use the notch in your extension."}),"\n",(0,o.jsx)(t.h3,{id:"make-a-commandc-block",children:"Make a Command/C-Block"}),"\n",(0,o.jsx)(t.p,{children:"In your extension's category, make a basic block:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"blocks: [\r\n    {\r\n        opcode: 'myCoolNotch',\r\n        text: 'bumpy notch',\r\n        blockType: Scratch.BlockType.COMMAND,\r\n    },\r\n]\n"})}),"\n",(0,o.jsxs)(t.p,{children:["To give the outer notches our custom notch, we need to add the ",(0,o.jsx)(t.strong,{children:"notchAccepts"})," parameter:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"{\r\n    opcode: 'myCoolNotch',\r\n    text: 'bumpy notch',\r\n    blockType: Scratch.BlockType.COMMAND,\r\n    notchAccepts: \"myReallyCoolExtension-bumpyNotch\"\r\n},\n"})}),"\n",(0,o.jsx)("img",{src:"/img/docimages/customnotch_example_ext1.png",alt:"Example Notch Block"}),"\n",(0,o.jsxs)(t.p,{children:["To give the inner notches our custom notch, we need to add the ",(0,o.jsx)(t.strong,{children:"notchAccepts"})," parameter:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"{\r\n    opcode: 'myCoolNotchLoop',\r\n    text: 'bumpy notch loop',\r\n    blockType: Scratch.BlockType.LOOP,\r\n    branchCount: 1,\r\n    branches: [\r\n      { accepts: \"myReallyCoolExtension-bumpyNotch\" },\r\n    ],\r\n},\n"})}),"\n",(0,o.jsx)("img",{src:"/img/docimages/customnotch_example_ext2.png",alt:"Example Notch Block"})]})}function d(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>h,a:()=>i});var o=n(7294);const s={},c=o.createContext(s);function i(e){const t=o.useContext(c);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function h(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(c.Provider,{value:t},e.children)}}}]);