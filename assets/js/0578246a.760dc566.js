"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[792],{1832:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>r});var o=t(5893),s=t(1151);const l={title:"Custom Modal API"},a="Custom Modal API",i={id:"development/extensions/api/custom-modals",title:"Custom Modal API",description:"The only intended use of this API is within the editor, do not make blocks to display these custom modals.",source:"@site/docs/development/extensions/api/custom-modals.md",sourceDirName:"development/extensions/api",slug:"/development/extensions/api/custom-modals",permalink:"/PenguinMod-Docs/development/extensions/api/custom-modals",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Custom Modal API"},sidebar:"customExtensions",previous:{title:"Custom Input API",permalink:"/PenguinMod-Docs/development/extensions/api/custom-inputs"},next:{title:"Custom Type APIs",permalink:"/PenguinMod-Docs/development/extensions/api/custom-types"}},c={},r=[{value:"Creation",id:"creation",level:2},{value:"Modal configuration",id:"modal-configuration",level:3},{value:"Modal styling",id:"modal-styling",level:3},{value:"Modal buttons",id:"modal-buttons",level:3},{value:"OK button",id:"ok-button",level:4},{value:"Cancel button",id:"cancel-button",level:4},{value:"Adding elements",id:"adding-elements",level:2}];function d(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"custom-modal-api",children:"Custom Modal API"}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsx)(n.p,{children:"The only intended use of this API is within the editor, do not make blocks to display these custom modals."})}),"\n",(0,o.jsx)(n.p,{children:"This API allows you to create ScratchBlocks modals meant to contain custom content."}),"\n",(0,o.jsx)(n.p,{children:"To use this API, you need a reference to ScratchBlocks/Blockly:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"/* get ScratchBlocks if availiable... */\r\nif (Scratch.gui) {\r\n    Scratch.gui.getBlockly().then(ScratchBlocks => {\r\n        // ScratchBlocks can be used here safely\r\n    });\r\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"creation",children:"Creation"}),"\n",(0,o.jsxs)(n.p,{children:["Here is a quick snippet of a ",(0,o.jsx)(n.code,{children:"customPrompt"})," modal:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'const modal = await ScratchBlocks.customPrompt({\r\n    title: "title",\r\n}, {\r\n    content: { width: "500px" }\r\n}, [\r\n    { name: "OK", role: "ok", callback: () => console.log("Confirmed") },\r\n    { name: "Cancel", role: "close", callback: () => console.log("Cancelled") }\r\n]);\n'})}),"\n",(0,o.jsx)(n.h3,{id:"modal-configuration",children:"Modal configuration"}),"\n",(0,o.jsxs)(n.p,{children:["The first parameter of ",(0,o.jsx)(n.code,{children:"customPrompt"})," determines the configuration of the modal."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"{\r\n    title: string,\r\n    scrollable: boolean?,\r\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The only required property here is the ",(0,o.jsx)(n.code,{children:"title"})," property:"]}),"\n",(0,o.jsx)("img",{src:"/img/docimages/custommodal_title.png",alt:"Image showing modal title"}),"\n",(0,o.jsxs)(n.p,{children:["It's recommended to set ",(0,o.jsx)(n.code,{children:"scrollable"})," to ",(0,o.jsx)(n.code,{children:"true"})," if your modal has resizable elements or can get really tall on the screen."]}),"\n",(0,o.jsx)(n.h3,{id:"modal-styling",children:"Modal styling"}),"\n",(0,o.jsx)(n.p,{children:"The second parameter determines the style of the modal on the page. This parameter is optional."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"{\r\n    content: CSSStyleDeclaration?,\r\n    overlay: CSSStyleDeclaration?,\r\n}\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["Both parts of the modal are a ",(0,o.jsx)(n.code,{children:"div"}),". The ",(0,o.jsx)(n.code,{children:"content"})," part of the modal is contained within the ",(0,o.jsx)(n.code,{children:"overlay"})," div. Note that the entire modal contents (including header and buttons) are contained within the ",(0,o.jsx)(n.code,{children:"content"})," div. If you want to style more parts of the modal, use the ",(0,o.jsx)(n.code,{children:"parentNode"}),"(s) of the element you are given after making a custom prompt."]})}),"\n",(0,o.jsxs)(n.p,{children:["If you want your modal to have a width of ",(0,o.jsx)(n.code,{children:"500px"})," you would set this in the ",(0,o.jsx)(n.code,{children:"content"})," styles:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'{\r\n    content: { width: "500px" },\r\n}\n'})}),"\n",(0,o.jsx)("img",{src:"/img/docimages/custommodal_width.png",alt:"Image showing modal width"}),"\n",(0,o.jsxs)(n.admonition,{type:"warning",children:[(0,o.jsxs)(n.p,{children:["Note that using certain CSS styles like ",(0,o.jsx)(n.code,{children:"height"})," and making them bigger than the content of the modal can cause the modal's outline to be larger than the modal.\r\nYou probably don't need to use a value other than ",(0,o.jsx)(n.code,{children:'"auto"'})," for ",(0,o.jsx)(n.code,{children:"height"}),", so it's best to either use that value or leave it out of the styles."]}),(0,o.jsx)("img",{src:"/img/docimages/custommodal_height_warning.png",height:"256px",alt:"Image showing modal height error"})]}),"\n",(0,o.jsxs)(n.p,{children:["If you want your modal to have a transparent red background, you would set this in the ",(0,o.jsx)(n.code,{children:"overlay"})," styles:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'{\r\n    overlay: { background: "rgba(255, 0, 0, 0.5)" },\r\n}\n'})}),"\n",(0,o.jsx)("img",{src:"/img/docimages/custommodal_redbackground.png",alt:"Image showing modal with red background"}),"\n",(0,o.jsxs)(n.p,{children:["You can have both ",(0,o.jsx)(n.code,{children:"content"})," and ",(0,o.jsx)(n.code,{children:"overlay"})," styles at the same time."]}),"\n",(0,o.jsx)(n.h3,{id:"modal-buttons",children:"Modal buttons"}),"\n",(0,o.jsx)(n.p,{children:"The third parameter determines the buttons present on the modal. This parameter is optional."}),"\n",(0,o.jsx)(n.p,{children:"This is an array of objects, with each object representing a button and some information + behavior."}),"\n",(0,o.jsx)(n.p,{children:"Each button appears right-to-left in the modal. It's recommended to define your OK button first, then your cancel button elsewhere.\r\nDefining buttons in that order will match with other Scratch modals."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'[\r\n    {\r\n        name: string,\r\n        role: "ok"|"close"|null,\r\n        class: "ok"|"cancel"|null,\r\n        style: CSSStyleDeclaration?,\r\n        dontClose: boolean,\r\n        callback: function(): void\r\n    }\r\n]\n'})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"role"})," property defines how the button should behave. Other interactions with the modal can trigger the button if it has a ",(0,o.jsx)(n.code,{children:"role"}),"."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:'"close"'})," role will run the callback when the ",(0,o.jsx)("img",{src:"https://penguinmod.com/dismiss.svg",height:"18px",alt:"X"})," button on the modal is clicked."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:'"close"'})," role will run the callback when the modal is closed via Browser Back or the modal is closed by clicking outside of it."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Do not define buttons with the same ",(0,o.jsx)(n.code,{children:"role"})," as another button, only use a ",(0,o.jsx)(n.code,{children:"role"})," once."]}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"class"})," property allows you to set predefined styles for the specified button."]}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"style"})," property allows you to define custom CSS on the button."]}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"dontClose"})," property will make the button not close the modal when clicked."]}),"\n",(0,o.jsx)(n.h4,{id:"ok-button",children:"OK button"}),"\n",(0,o.jsxs)(n.p,{children:["Most modals that perform an action should have an OK button. To create this button, use the ",(0,o.jsx)(n.code,{children:'"ok"'})," role when making a button.\r\nHere is a simple example:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'[\r\n    {\r\n        name: "OK",\r\n        role: "ok",\r\n        callback: () => console.log("Confirmed")\r\n    }\r\n]\n'})}),"\n",(0,o.jsx)("img",{src:"/img/docimages/custommodal_ok.png",alt:"Modal with OK button"}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["To use the OK button's styling on another button, set ",(0,o.jsx)(n.code,{children:"class"})," to ",(0,o.jsx)(n.code,{children:'"ok"'}),"."]})}),"\n",(0,o.jsx)(n.h4,{id:"cancel-button",children:"Cancel button"}),"\n",(0,o.jsxs)(n.p,{children:["If you want to have a literal cancel button on the modal, use the ",(0,o.jsx)(n.code,{children:'"close"'})," role when making a button. The role name is different from ",(0,o.jsx)(n.code,{children:'"cancel"'})," since this button is also used when the modal is ",(0,o.jsx)(n.em,{children:"closed"})," by actions like pressing the ",(0,o.jsx)("img",{src:"https://penguinmod.com/dismiss.svg",height:"18px",alt:"X"})," button."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'[\r\n    {\r\n        name: "Cancel",\r\n        role: "close",\r\n        callback: () => console.log("Cancelled")\r\n    }\r\n]\n'})}),"\n",(0,o.jsx)("img",{src:"/img/docimages/custommodal_cancel.png",alt:"Modal with Cancel button"}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["To use the Cancel button's styling on another button, set ",(0,o.jsx)(n.code,{children:"class"})," to ",(0,o.jsx)(n.code,{children:'"cancel"'}),"."]})}),"\n",(0,o.jsx)(n.h2,{id:"adding-elements",children:"Adding elements"}),"\n",(0,o.jsx)(n.p,{children:"Now that you have your modal on the screen, you can add elements to it just by appending to the element returned:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'const modal = await ScratchBlocks.customPrompt({\r\n    title: "title",\r\n}, {\r\n    content: { width: "500px" }\r\n}, [\r\n    { name: "OK", role: "ok", callback: () => console.log("Confirmed") },\r\n    { name: "Cancel", role: "close", callback: () => console.log("Cancelled") }\r\n]);\r\n\r\nmodal.appendChild(document.createElement("textarea"));\n'})}),"\n",(0,o.jsx)("img",{src:"/img/docimages/custommodal_elements.png",alt:"Modal with textarea element"})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>i,a:()=>a});var o=t(7294);const s={},l=o.createContext(s);function a(e){const n=o.useContext(l);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(l.Provider,{value:n},e.children)}}}]);