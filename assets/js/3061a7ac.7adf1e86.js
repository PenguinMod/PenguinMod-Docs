"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[519],{549:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>u,toc:()=>l});var s=t(5893),o=t(1151);const r={title:"Custom Input API"},i=void 0,u={id:"development/extensions/api/custom-inputs",title:"Custom Input API",description:"API for creating custom, DOM-based inputs for Blocks",source:"@site/docs/development/extensions/api/custom-inputs.md",sourceDirName:"development/extensions/api",slug:"/development/extensions/api/custom-inputs",permalink:"/PenguinMod-Docs/development/extensions/api/custom-inputs",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Custom Input API"},sidebar:"customExtensions",previous:{title:"Custom Fields API",permalink:"/PenguinMod-Docs/development/extensions/api/categories/field-types"},next:{title:"Custom Modal API",permalink:"/PenguinMod-Docs/development/extensions/api/custom-modals"}},c={},l=[{value:"[1] Registration",id:"1-registration",level:2},{value:"[2] Creating Inputs",id:"2-creating-inputs",level:2},{value:"[3] Adding Custom Inputs to Your Extensions",id:"3-adding-custom-inputs-to-your-extensions",level:2}];function a(e){const n={code:"code",em:"em",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"API for creating custom, DOM-based inputs for Blocks"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"You should have a decent knowledge of ScratchBlocks to use this API"})}),"\n",(0,s.jsx)(n.h2,{id:"1-registration",children:"[1] Registration"}),"\n",(0,s.jsx)(n.p,{children:"In order to make custom inputs we need to first register them using ScratchBlocks. Heres how you can register your input:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'  /* get ScratchBlocks if availiable... */\r\n  if (Scratch.gui) {\r\n    Scratch.gui.getBlockly().then(ScratchBlocks => {\r\n      ScratchBlocks.FieldCustom.registerInput(\r\n        /* insert the ID for your custom input below */\r\n        "input-ID",\r\n        /* DOM element that will be placed in blocks (dont add event listeners here as they get erased) */\r\n        element,\r\n        (input, element) => {\r\n          /* runs when input is initialized */\r\n          // you can use this to add styling, event and click listeners, etc. to your input\r\n          console.log("INIT", input, element);\r\n        },\r\n        (input, element) => {\r\n          /* runs when input is clicked */\r\n          // you can use this to set the input value (via \'input.setValue(...)\'), open a dropdown, etc.\r\n          console.log("CLICK", input, element);\r\n        },\r\n        (input, element) => {\r\n          /* runs when input should be visually updated */\r\n          // this can be left empty or can be used to change the input or its source block\'s size and more\r\n          console.log("UPDATE", input, element);\r\n        },\r\n        (input, element) => {\r\n          /* runs when input is about to be removed */\r\n          // this is optional, can be used when you need to remove audio nodes or custom menus, etc\r\n          console.log("DELETE", input, element);\r\n        }\r\n      );\r\n    });\n'})}),"\n",(0,s.jsx)(n.p,{children:"There are additional registration functions you can call:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'/* returns a Map of all registered inputs */\r\nScratchBlocks.FieldCustom.registeredInputs();\r\n\r\n/* unregisters a custom input from its ID */\r\nScratchBlocks.FieldCustom.unregisterInput("input-ID");\n'})}),"\n",(0,s.jsx)(n.h2,{id:"2-creating-inputs",children:"[2] Creating Inputs"}),"\n",(0,s.jsxs)(n.p,{children:["As mentioned above, custom inputs are displayed with the DOM, so HTML and SVG. However due to browser limitations, not all features will ",(0,s.jsx)(n.strong,{children:"visually"})," work in the input."]}),"\n",(0,s.jsx)(n.p,{children:'Notable ones include: video tags, audio tags, etc.\r\nAdditionally, you cannot use "click" listeners on elements in your input. You should use "mousedown" instead.'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Pro Tip"})," You can make your own UI for non-working features (like audio tags -- make your own audio player!)"]}),"\n",(0,s.jsx)(n.h2,{id:"3-adding-custom-inputs-to-your-extensions",children:"[3] Adding Custom Inputs to Your Extensions"}),"\n",(0,s.jsx)(n.p,{children:"Now that your input is registered (with no errors), you can safely use the input in your extension."}),"\n",(0,s.jsx)(n.p,{children:"Heres how to format the block JSON:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"...\r\nclass Extension {\r\n  getInfo() {\r\n    return {\r\n      id: '...',\r\n      name: 'example',\r\n      blocks: [\r\n        {\r\n          opcode: 'myCoolBlock',\r\n          blockType: BlockType.COMMAND,\r\n          text: 'custom input [INPUT]',\r\n          arguments: {\r\n            INPUT: {\r\n              type: ArgumentType.CUSTOM,\r\n              id: \"input-ID\" // insert the ID used from registration here\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n...\n"})}),"\n",(0,s.jsx)(n.p,{children:"and you're done!"}),"\n",(0,s.jsx)("img",{src:"/img/docimages/custom_input_slider.png",alt:"Image showing the a custom slider input"})]})}function d(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>u,a:()=>i});var s=t(7294);const o={},r=s.createContext(o);function i(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function u(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);